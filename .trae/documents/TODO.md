# 管理后台功能完善 TODO 列表

## 1. 修复添加用户时的'Unauthorized'错误
**状态**: ✅ 已完成
**优先级**: 高

**问题描述**:
在管理后台添加用户时出现 `添加用户失败: Error: API request failed: Unauthorized` 错误。问题根源是前端使用硬编码的adminToken，但后端需要真实的Supabase认证。

**解决方案**:
1. ✅ 后端添加管理员登录API (`/api/admin/login`)
2. ✅ 前端修改AdminLogin组件，调用真实登录API
3. ✅ 更新语言文件，添加邮箱登录相关翻译键

**技术实现**:
- ✅ 在admin.ts中添加POST /api/admin/login端点
- ✅ 修改AdminLogin.tsx，将硬编码登录改为API调用
- ✅ 将登录表单从"用户名"改为"邮箱"字段
- ✅ 在LanguageContext.tsx中添加admin.login.email和admin.login.emailPlaceholder翻译键

**完成详情**:
- 成功实现了真实的管理员认证流程
- 登录成功后将adminToken和adminUser存储到localStorage
- 支持中英越三语言的邮箱登录界面

## 2. 活动分类管理整合到活动管理页面
**状态**: ✅ 已完成
**优先级**: 高

**问题描述**:
需要将独立的活动分类管理页面整合到活动管理页面中，通过标签页的形式提供统一的管理界面。

**解决方案**:
1. ✅ 在AdminActivities组件中添加标签页功能
2. ✅ 将AdminCategories的分类管理功能整合进来
3. ✅ 保持原有的活动管理功能不变
4. ✅ 添加必要的翻译键支持

**技术实现**:
- ✅ 修改AdminActivities.tsx，添加Tab组件和标签页切换
- ✅ 整合分类CRUD操作（创建、编辑、删除分类）
- ✅ 添加分类管理相应的状态管理
- ✅ 更新语言文件，添加tabs.activities和tabs.categories翻译键

**完成详情**:
- 成功将分类管理功能整合到活动管理页面
- 实现了活动管理和分类管理的标签页切换
- 保留了所有原有功能，包括分类的搜索、创建、编辑、删除
- 添加了中英越三语言的标签页翻译支持

## 3. 内容管理添加内容分类管理功能
**状态**: 🔄 待开始
**优先级**: 高

**问题描述**:
需要在内容管理中添加内容分类管理功能，对应的内容分类会在前台的热门内容里面显示，类似：全部、分类1、分类2的筛选功能。

**解决方案**:
1. 创建内容分类数据表和API
2. 在管理后台内容管理页面添加分类管理功能
3. 修改前台热门内容页面，添加分类筛选
4. 添加相应的翻译键支持

**技术实现**:
- 设计content_categories数据表
- 添加内容分类管理API端点
- 修改AdminPosts组件，添加分类管理标签页
- 修改前台热门内容组件，添加分类筛选功能
- 更新语言文件

**预期效果**:
- 管理员可以创建、编辑、删除内容分类
- 发布内容时可以选择分类
- 前台用户可以按分类筛选热门内容
- 支持多语言界面

---

## 总体进度
- ✅ 任务1: 修复添加用户Unauthorized错误
- ✅ 任务2: 活动分类管理整合到活动管理页面
- 🔄 任务3: 内容管理添加内容分类管理功能

**当前状态**: 2/3 任务已完成，正在进行第3个任务