# BiubiuStar Ultra ä¸€é”®éƒ¨ç½²æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®éƒ¨ç½²å‘½ä»¤

```bash
# å…‹éš†é¡¹ç›®å¹¶è¿›å…¥éƒ¨ç½²ç›®å½•
git clone https://github.com/lyfe2025/biubiustar-ultra.git
cd biubiustar-ultra/deploy

# æ‰§è¡Œä¸€é”®éƒ¨ç½²
./deploy.sh
```

### è‡ªå®šä¹‰éƒ¨ç½²

```bash
# æŒ‡å®šé¡¹ç›®ç›®å½•
./deploy.sh --target-dir /path/to/your/project

# è·³è¿‡ç¯å¢ƒæ£€æŸ¥
./deploy.sh --skip-env-check

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
./deploy.sh --config /path/to/your/.env

# æŸ¥çœ‹å¸®åŠ©
./deploy.sh --help
```

## ğŸ“‹ éƒ¨ç½²æµç¨‹

### 1. ç¯å¢ƒæ£€æŸ¥
- è‡ªåŠ¨æ£€æŸ¥å¹¶å®‰è£…å¿…è¦ä¾èµ–ï¼šGitã€Node.jsã€npmã€pnpm
- æ”¯æŒ macOS å’Œä¸»æµ Linux å‘è¡Œç‰ˆ
- å¯é€‰ Docker ç¯å¢ƒæ£€æŸ¥

### 2. é¡¹ç›®è·å–
- ä» GitHub å…‹éš†æœ€æ–°ä»£ç 
- æ”¯æŒæŒ‡å®šåˆ†æ”¯æˆ–æ ‡ç­¾
- è‡ªåŠ¨å¤„ç†ç›®å½•å†²çª

### 3. é…ç½®ç”Ÿæˆ
- åŸºäº `env.template` ç”Ÿæˆ `.env` é…ç½®æ–‡ä»¶
- æ™ºèƒ½æ£€æµ‹ç°æœ‰é…ç½®å¹¶æä¾›åˆå¹¶é€‰é¡¹
- æä¾›é…ç½®å‘å¯¼å¸®åŠ©å¡«å†™å…³é”®å‚æ•°

### 4. ä¾èµ–å®‰è£…
- è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ pnpm æˆ– npm
- å®‰è£…é¡¹ç›®ä¾èµ–
- æ„å»ºå‰ç«¯èµ„æº

### 5. æœåŠ¡å¯åŠ¨
- ä½¿ç”¨é¡¹ç›®å†…ç½®çš„ `project.sh` è„šæœ¬å¯åŠ¨æœåŠ¡
- è‡ªåŠ¨å¤„ç†ç«¯å£å†²çª
- åå°è¿è¡Œå¹¶ä¿å­˜è¿›ç¨‹ä¿¡æ¯

### 6. å¥åº·æ£€æŸ¥
- éªŒè¯å‰ç«¯å’Œåç«¯æœåŠ¡çŠ¶æ€
- æ£€æŸ¥ API ç«¯ç‚¹å¯ç”¨æ€§
- ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

### 7. è®¿é—®ä¿¡æ¯
- æ˜¾ç¤ºå‰ç«¯è®¿é—®åœ°å€
- æ˜¾ç¤ºåç«¯ API åœ°å€
- æä¾›ç®¡ç†é¢æ¿é“¾æ¥

## ğŸ“ æ–‡ä»¶ç»“æ„

```
deploy/
â”œâ”€â”€ deploy.sh          # ä¸»éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ check-env.sh       # ç¯å¢ƒæ£€æŸ¥è„šæœ¬
â”œâ”€â”€ health-check.sh    # å¥åº·æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ env.template       # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md          # æœ¬æ–‡æ¡£
```

## ğŸ”§ è„šæœ¬è¯¦è§£

### deploy.sh - ä¸»éƒ¨ç½²è„šæœ¬

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- å®Œæ•´çš„éƒ¨ç½²æµç¨‹ç®¡ç†
- æ™ºèƒ½é”™è¯¯å¤„ç†å’Œå›æ»š
- è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- æ”¯æŒå¤šç§éƒ¨ç½²é€‰é¡¹

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./deploy.sh [é€‰é¡¹]

é€‰é¡¹ï¼š
  --target-dir DIR     æŒ‡å®šé¡¹ç›®éƒ¨ç½²ç›®å½• (é»˜è®¤: ../biubiustar-ultra)
  --repo-url URL       æŒ‡å®š Git ä»“åº“åœ°å€
  --branch BRANCH      æŒ‡å®šåˆ†æ”¯ (é»˜è®¤: main)
  --skip-env-check     è·³è¿‡ç¯å¢ƒä¾èµ–æ£€æŸ¥
  --skip-build         è·³è¿‡æ„å»ºæ­¥éª¤
  --config FILE        ä½¿ç”¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶
  --force              å¼ºåˆ¶è¦†ç›–ç°æœ‰éƒ¨ç½²
  --help               æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### check-env.sh - ç¯å¢ƒæ£€æŸ¥è„šæœ¬

**æ£€æŸ¥é¡¹ç›®ï¼š**
- Git ç‰ˆæœ¬æ§åˆ¶å·¥å…·
- Node.js è¿è¡Œç¯å¢ƒ (æ¨è v18+)
- npm åŒ…ç®¡ç†å™¨
- pnpm åŒ…ç®¡ç†å™¨ (æ¨è)
- Docker (å¯é€‰)

**è‡ªåŠ¨å®‰è£…ï¼š**
- macOS: ä½¿ç”¨ Homebrew
- Ubuntu/Debian: ä½¿ç”¨ apt
- CentOS/RHEL: ä½¿ç”¨ yum/dnf
- Arch Linux: ä½¿ç”¨ pacman

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./check-env.sh [é€‰é¡¹]

é€‰é¡¹ï¼š
  --install-missing    è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„ä¾èµ–
  --check-docker       æ£€æŸ¥ Docker ç¯å¢ƒ
  --verbose            æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
```

### health-check.sh - å¥åº·æ£€æŸ¥è„šæœ¬

**æ£€æŸ¥å†…å®¹ï¼š**
- æœåŠ¡è¿›ç¨‹çŠ¶æ€
- ç«¯å£å ç”¨æƒ…å†µ
- HTTP æœåŠ¡å“åº”
- API ç«¯ç‚¹å¯ç”¨æ€§
- ç³»ç»Ÿèµ„æºä½¿ç”¨
- é¡¹ç›®æ–‡ä»¶å®Œæ•´æ€§

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./health-check.sh [é€‰é¡¹]

é€‰é¡¹ï¼š
  --project-dir DIR    æŒ‡å®šé¡¹ç›®ç›®å½•
  --timeout SECONDS    è®¾ç½®æ£€æŸ¥è¶…æ—¶æ—¶é—´ (é»˜è®¤: 30)
  --report             ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
  --continuous         æŒç»­ç›‘æ§æ¨¡å¼
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

éƒ¨ç½²è„šæœ¬ä¼šåŸºäº `env.template` ç”Ÿæˆ `.env` é…ç½®æ–‡ä»¶ã€‚å…³é”®é…ç½®é¡¹ï¼š

**å¿…é¡»é…ç½®ï¼š**
- `SUPABASE_URL` - Supabase é¡¹ç›® URL
- `SUPABASE_ANON_KEY` - Supabase åŒ¿åå¯†é’¥
- `SUPABASE_SERVICE_ROLE_KEY` - Supabase æœåŠ¡è§’è‰²å¯†é’¥
- `JWT_SECRET` - JWT ç­¾åå¯†é’¥
- `SESSION_SECRET` - ä¼šè¯å¯†é’¥

**æ¨èé…ç½®ï¼š**
- `NODE_ENV=production` - ç”Ÿäº§ç¯å¢ƒ
- `PORT=3000` - åç«¯ç«¯å£
- `FRONTEND_URL` - å‰ç«¯è®¿é—®åœ°å€
- `CORS_ORIGIN` - CORS å…è®¸çš„æº

### ç«¯å£é…ç½®

é»˜è®¤ç«¯å£åˆ†é…ï¼š
- å‰ç«¯æœåŠ¡ï¼š5173
- åç«¯æœåŠ¡ï¼š3001

å¦‚éœ€ä¿®æ”¹ï¼Œè¯·ç¼–è¾‘ `.env` æ–‡ä»¶ä¸­çš„ç›¸åº”é…ç½®ã€‚

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. ç«¯å£è¢«å ç”¨**
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :3001

# åœæ­¢ç°æœ‰æœåŠ¡
./deploy.sh --force
```

**2. ä¾èµ–å®‰è£…å¤±è´¥**
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

**3. æƒé™é—®é¢˜**
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh check-env.sh health-check.sh
```

**4. é…ç½®é”™è¯¯**
```bash
# é‡æ–°ç”Ÿæˆé…ç½®
rm .env
./deploy.sh --config env.template
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
tail -f deploy.log

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
cd ../
./project.sh logs
```

### æœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./health-check.sh --report

# é‡å¯æœåŠ¡
cd ../
./project.sh restart

# åœæ­¢æœåŠ¡
cd ../
./project.sh stop
```

## ğŸ”’ å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æ›´æ¢é»˜è®¤å¯†é’¥**
   ```bash
   # ç”Ÿæˆå¼ºå¯†é’¥
   openssl rand -hex 32
   ```

2. **é…ç½®é˜²ç«å¢™**
   ```bash
   # åªå¼€æ”¾å¿…è¦ç«¯å£
   ufw allow 80
   ufw allow 443
   ufw allow 22
   ```

3. **ä½¿ç”¨ HTTPS**
   - é…ç½® SSL è¯ä¹¦
   - å¯ç”¨ HSTS
   - è®¾ç½®å®‰å…¨å¤´

4. **å®šæœŸæ›´æ–°**
   ```bash
   # æ›´æ–°é¡¹ç›®ä»£ç 
   git pull origin main
   ./deploy.sh --force
   ```

### å¤‡ä»½ç­–ç•¥

1. **æ•°æ®åº“å¤‡ä»½**
   - å®šæœŸå¤‡ä»½ Supabase æ•°æ®
   - è®¾ç½®è‡ªåŠ¨å¤‡ä»½è®¡åˆ’

2. **é…ç½®å¤‡ä»½**
   ```bash
   # å¤‡ä»½é…ç½®æ–‡ä»¶
   cp .env .env.backup.$(date +%Y%m%d)
   ```

3. **ä»£ç å¤‡ä»½**
   - ä½¿ç”¨ Git ç‰ˆæœ¬æ§åˆ¶
   - å®šæœŸæ¨é€åˆ°è¿œç¨‹ä»“åº“

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æ€§èƒ½ç›‘æ§

```bash
# ç³»ç»Ÿèµ„æºç›‘æ§
top
htop
df -h

# åº”ç”¨æ€§èƒ½ç›‘æ§
./health-check.sh --continuous
```

### æ—¥å¿—ç®¡ç†

```bash
# æ—¥å¿—è½®è½¬
logrotate /etc/logrotate.d/biubiustar

# æ¸…ç†æ—§æ—¥å¿—
find logs/ -name "*.log" -mtime +30 -delete
```

### æ›´æ–°æµç¨‹

```bash
# 1. å¤‡ä»½å½“å‰ç‰ˆæœ¬
cp -r biubiustar-ultra biubiustar-ultra.backup

# 2. æ‹‰å–æœ€æ–°ä»£ç 
cd biubiustar-ultra
git pull origin main

# 3. é‡æ–°éƒ¨ç½²
cd deploy
./deploy.sh --force

# 4. éªŒè¯æœåŠ¡
./health-check.sh --report
```

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©

- **é¡¹ç›®æ–‡æ¡£**: [GitHub Wiki](https://github.com/lyfe2025/biubiustar-ultra/wiki)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/lyfe2025/biubiustar-ultra/issues)
- **è®¨è®ºäº¤æµ**: [GitHub Discussions](https://github.com/lyfe2025/biubiustar-ultra/discussions)

### è”ç³»æ–¹å¼

- **é‚®ç®±**: support@biubiustar.com
- **QQç¾¤**: 123456789
- **å¾®ä¿¡ç¾¤**: æ‰«æäºŒç»´ç åŠ å…¥

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-15)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒä¸€é”®éƒ¨ç½²
- å®Œæ•´çš„ç¯å¢ƒæ£€æŸ¥
- è‡ªåŠ¨åŒ–å¥åº·æ£€æŸ¥

---

**æ„Ÿè°¢ä½¿ç”¨ BiubiuStar Ultraï¼** ğŸŒŸ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼